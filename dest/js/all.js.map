{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/index.js","src/js/script.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","var a = require('./script.js');\n\nvar gulp = true;\n","$(document).ready(function() {\n\n  var pokemonArray =  pokemonService.getPokemon();\n    //Autocomplete field\n    $(\"#pokemonSelect\").autocomplete({\n        //Grab data from Pokémon Array\n        // source: pokemonArray.sort(SortByName),\n        source: pokemonService.getPokemon(),\n        autoFocus: true,\n        minLength: 1,\n    });\n    //Sort Pokémon Array in select alphabetically\n    function SortByName(a, b) {\n        var aName = a.species.toLowerCase();\n        var bName = b.species.toLowerCase();\n        return ((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));\n    };\n    // Overrides the default autocomplete filter function to search only from the beginning of the string\n    $.ui.autocomplete.filter = function(array, term) {\n        var matcher = new RegExp(\"^\" + $.ui.autocomplete.escapeRegex(term), \"i\");\n        return $.grep(array, function(value) {\n            return matcher.test(value.label || value.value || value);\n        });\n    };\n\n    //Reset functions\n    resetForm = function() {\n        $('#pokemonSelect, #pokemonNumber').val('');\n        $('#pokemon-desc, .number-input__wrapper, .pokemon-avatar__wrapper li, .candy-input__wrapper, #candyNumber, #pokemonChoice h2, #addPokemonSpecies, #resetPokemonSelect, .evolution-bonus').remove();\n        return false;\n    };\n    resetTable = function() {\n        $('#finalDestination').find('tbody').html('');\n    };\n    // Reset field\n    $('#resetPokemonSelect').on('click', function(e) {\n        e.preventDefault();\n        resetForm();\n    });\n    // Reset  table\n    $('#resetTable').on('click', function(e) {\n        e.preventDefault();\n        resetTable();\n    });\n    // Remove egg animation time warning\n    removeEggMessage = function() {\n      $('#eggMessage').remove();\n    }\n\n    //Pokémon Selector\n    $('#pokemonSelect').on('autocompleteselect', function(e, ui) {\n        //Remove former selection\n        $('#pokemon-desc, #addPokemonSpecies').remove();\n        $(\"#pokemonFields\").html('');\n        //Add Pokémon avatar\n        $pokemonAvatar = function() {\n            $(\"#pokemonFields\").append('<li class=\"pokemon-avatar ' + ui.item.resourceName + '\">' + '</li>');\n            $('#poke-img').addClass(ui.item.resourceName);\n            $('#poke-img').addClass('pokemon-avatar');\n            $('#pokemonFields li').attr('id', function(i) {\n                return 'pokemon' + (i + 1);\n            });\n        };\n        // Generate inputfield to select number of Pokémon to add\n        $pokemonNumberInput = function() {\n            $('.ui-widget').append('<div class=\"number-input__wrapper\"><label for=\"pokemonNumber\">Number of <span class=\"species-instance\">' + ui.item.value + ':</span></label> <input id=\"pokemonNumber\" type=\"number\" name=\"pokemonNumber\" class=\"pokemon-number\" min=\"0\" value=\"1\"></div>');\n        }\n        // Generate inputfield to select Pokémon candy in inventory\n        $pokemonCandyInput = function() {\n            $('.ui-widget').append('<div class=\"candy-input__wrapper\"><label for=\"candyNumber\">Number of <span class=\"species-instance\">' + ui.item.candyType + ' candy in inventory:</span></label> <input id=\"candyNumber\" type=\"number\" name=\"candyNumber\" class=\"candy-number\" min=\"0\" value=\"1\"></div>')\n        }\n        // Generate checkbox to indicate a first evolution of the species\n        $pokemonFirstEvolution = function() {\n            $('.ui-widget').append('<div class=\"evolution-bonus\"><span class=\"bonus\">Adds<br>500 XP!</span><input type=\"checkbox\" name=\"firstEvolve\" id=\"firstEvolve\"><label for=\"firstEvolve\"></label><span>Is this the first time you evolve a <span class=\"species-instance\">' + ui.item.value + '</span>?</span></div>')\n        }\n\n        //Evolution is not possible on end states\n        if (ui.item.evolve != true) {\n            resetForm();\n            $pokemonAvatar(); //Generate first Pokémon avatar\n\n            $('#pokemonChoice').prepend('<h2>You chose <span class=\"species-instance\">' + ui.item.value + '! </span></h2><p id=\"pokemon-desc\">Unfortunately <span class=\"species-instance\">' + ui.item.value + '</span> does not evolve. :(</p>'); //Inform user\n            $('#pokemonSelect').val('');\n\n            $('.buttons').append('<a id=\"resetPokemonSelect\" href=\"javascript:void(0)\" onclick=\"resetForm();\">Reset Selection</a>')\n            return false;\n\n        }\n        //Add multiple Pokémon of one species\n        else {\n            resetForm();\n            //Show first Pokémon avatar\n            $pokemonAvatar();\n\n            //Add Pokémon choice + inputfields\n            $('#pokemonChoice').prepend('<p id=\"pokemon-desc\"><h2>You chose <span class=\"species-instance\">' + ui.item.value + '!&nbsp;</span></h2>');\n            $('.ui-widget').append($pokemonNumberInput()).append($pokemonCandyInput()).append($pokemonFirstEvolution());\n            //Generate buttons to reset selectionfield or to add Pokémon to evolution table\n            $('.buttons').append('<a id=\"resetPokemonSelect\" href=\"javascript:void(0)\" onclick=\"resetForm();\">Reset Selection</a><a id=\"addPokemonSpecies\" href=\"javascript:void(0)\" onclick=\"addPokemonSpecies();\">Add Pokémon to Table</a>');\n        }\n\n        //Generate Pokémon avatars based number selection in inputfield\n        $('#pokemonNumber').on('keyup change', function() {\n            var $numberPokemon = parseInt($(\"input[name='pokemonNumber']\").val(), 10);\n            //Reset avatars from previous selection\n            $(\"#pokemonFields\").html(\"\");\n            //Number input loop\n            for (i = 1; i <= $numberPokemon; i++) {\n                $pokemonAvatar();\n            }\n        });\n\n        //Remove Pokémon avatar if value reaches 0\n        if ($(\"input[name='pokemonNumber']\").val() === 0) {\n            resetForm();\n        }\n\n        //Add bonus bubble\n        $('#firstEvolve').change(function(){\n          if($(this).is(':checked')) {\n              $('.bonus').addClass('bonus-animated');\n          } else {\n            $('.bonus').removeClass('bonus-animated').css('opacity', 0);\n          }\n        })\n\n\n        // Add Pokémon to Evolution table\n        addPokemonSpecies = function() {\n\n            var $tableInner = $('#finalDestination').find('tbody');\n            var $numPokemon = parseInt($('#pokemonNumber').val(), 10);\n            var $numCandy = parseInt($('#candyNumber').val(), 10);\n            var $candyNeeded = $numPokemon * ui.item.candy;\n            var $candyNeededvsInventory = Math.floor($numCandy / ui.item.candy);\n            var $evolutionsPossible = Math.min($candyNeededvsInventory, $numPokemon);\n\n\n            if ($numPokemon === ui.item.candy + 1) {\n              $('#metaEvolution').css('display', 'block');\n              $('#metaNumCandy').append(ui.item.candy + ' <span class=\"species-instance\">' + ui.item.species + '</span> candy');\n              $('#metaEvolveState').append('');\n            } else {\n              $('#metaEvolution').css('display', 'none');\n            }\n\n            //Check wether there's a new evolution taking place\n            if ($('#firstEvolve').is(':checked') && $evolutionsPossible >= 1) {\n                $xpGained = $evolutionsPossible * 500 + 500;\n            } else {\n                $xpGained = $evolutionsPossible * 500;\n            }\n\n            var rowTemplate = '<tr><td>' + $numPokemon + '</td><td class=\"pokemon-avatar ' + ui.item.resourceName + '\"></td>' + '</td><td class=\"wide\">' + $candyNeeded + '</td><td class=\"wide\">' + $numCandy + '</td><td class=\"evolvesPossible\">' + $evolutionsPossible + '</td><td class=\"xpGained\">' + $xpGained + '</td><td><a id=\"removeRow\" class=\"circular-button\">&#215;</a></td>\"</tr>';\n\n            $tableInner.append(rowTemplate);\n\n            // add unique id to each row -- do I need this?\n            $('#finalDestination tbody tr').attr('id', function(i) {\n                return 'pokemonRow' + (i + 1);\n            });\n\n            // remove row on click\n            $(document).on('click', '#removeRow', function() {\n                $(this).closest('tr').remove();\n            });\n\n            //Calculate # evolutions possible and XP gained\n            function calculateSum() {\n                var sum1 = 0;\n                var sum2 = 0;\n\n                $('.evolvesPossible').each(function() {\n                    sum1 += parseInt($(this).html());\n\n                    //Warn user that roughly 60 evolutions are possible within one luck egg activation\n                    if (sum1 >= 60 ) {\n                      $('#eggMessage').html('');\n                      $('#eggMessage').append('<p class=\"egg-message\">You can only evolve (roughly) 60 Pokémon during one Lucky Egg activation. <br>You may want to get another egg!</p> <a id=\"removeEggMessage\" href=\"javascript:void(0)\" onclick=\"removeEggMessage();\">Got it!</a>');\n                    } else if (sum1 < 60) {\n                      $('#eggMessage').html('');\n                    }\n                });\n                $('.xpGained').each(function() {\n                    sum2 += parseInt($(this).html());\n                });\n\n                //Add calculations to Evolution Table\n                $('#total-1').html(sum1);\n                $('#total-2').html(sum2);\n                $('#total-3').html(sum2 * 2);\n            }\n            calculateSum();\n\n            //Redo calculation if user removes a row from the Evolution table\n            $(document).on('click', $('#removeRow'), function() {\n                calculateSum();\n            });\n\n            resetForm();\n          }\n\n\n    });\n\n});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvaW5kZXguanMiLCJzcmMvanMvc2NyaXB0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwidmFyIGEgPSByZXF1aXJlKCcuL3NjcmlwdC5qcycpO1xuXG52YXIgZ3VscCA9IHRydWU7XG4iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuICB2YXIgcG9rZW1vbkFycmF5ID0gIHBva2Vtb25TZXJ2aWNlLmdldFBva2Vtb24oKTtcbiAgICAvL0F1dG9jb21wbGV0ZSBmaWVsZFxuICAgICQoXCIjcG9rZW1vblNlbGVjdFwiKS5hdXRvY29tcGxldGUoe1xuICAgICAgICAvL0dyYWIgZGF0YSBmcm9tIFBva8OpbW9uIEFycmF5XG4gICAgICAgIC8vIHNvdXJjZTogcG9rZW1vbkFycmF5LnNvcnQoU29ydEJ5TmFtZSksXG4gICAgICAgIHNvdXJjZTogcG9rZW1vblNlcnZpY2UuZ2V0UG9rZW1vbigpLFxuICAgICAgICBhdXRvRm9jdXM6IHRydWUsXG4gICAgICAgIG1pbkxlbmd0aDogMSxcbiAgICB9KTtcbiAgICAvL1NvcnQgUG9rw6ltb24gQXJyYXkgaW4gc2VsZWN0IGFscGhhYmV0aWNhbGx5XG4gICAgZnVuY3Rpb24gU29ydEJ5TmFtZShhLCBiKSB7XG4gICAgICAgIHZhciBhTmFtZSA9IGEuc3BlY2llcy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB2YXIgYk5hbWUgPSBiLnNwZWNpZXMudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuICgoYU5hbWUgPCBiTmFtZSkgPyAtMSA6ICgoYU5hbWUgPiBiTmFtZSkgPyAxIDogMCkpO1xuICAgIH07XG4gICAgLy8gT3ZlcnJpZGVzIHRoZSBkZWZhdWx0IGF1dG9jb21wbGV0ZSBmaWx0ZXIgZnVuY3Rpb24gdG8gc2VhcmNoIG9ubHkgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBzdHJpbmdcbiAgICAkLnVpLmF1dG9jb21wbGV0ZS5maWx0ZXIgPSBmdW5jdGlvbihhcnJheSwgdGVybSkge1xuICAgICAgICB2YXIgbWF0Y2hlciA9IG5ldyBSZWdFeHAoXCJeXCIgKyAkLnVpLmF1dG9jb21wbGV0ZS5lc2NhcGVSZWdleCh0ZXJtKSwgXCJpXCIpO1xuICAgICAgICByZXR1cm4gJC5ncmVwKGFycmF5LCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXIudGVzdCh2YWx1ZS5sYWJlbCB8fCB2YWx1ZS52YWx1ZSB8fCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvL1Jlc2V0IGZ1bmN0aW9uc1xuICAgIHJlc2V0Rm9ybSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcjcG9rZW1vblNlbGVjdCwgI3Bva2Vtb25OdW1iZXInKS52YWwoJycpO1xuICAgICAgICAkKCcjcG9rZW1vbi1kZXNjLCAubnVtYmVyLWlucHV0X193cmFwcGVyLCAucG9rZW1vbi1hdmF0YXJfX3dyYXBwZXIgbGksIC5jYW5keS1pbnB1dF9fd3JhcHBlciwgI2NhbmR5TnVtYmVyLCAjcG9rZW1vbkNob2ljZSBoMiwgI2FkZFBva2Vtb25TcGVjaWVzLCAjcmVzZXRQb2tlbW9uU2VsZWN0LCAuZXZvbHV0aW9uLWJvbnVzJykucmVtb3ZlKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIHJlc2V0VGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnI2ZpbmFsRGVzdGluYXRpb24nKS5maW5kKCd0Ym9keScpLmh0bWwoJycpO1xuICAgIH07XG4gICAgLy8gUmVzZXQgZmllbGRcbiAgICAkKCcjcmVzZXRQb2tlbW9uU2VsZWN0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJlc2V0Rm9ybSgpO1xuICAgIH0pO1xuICAgIC8vIFJlc2V0ICB0YWJsZVxuICAgICQoJyNyZXNldFRhYmxlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJlc2V0VGFibGUoKTtcbiAgICB9KTtcbiAgICAvLyBSZW1vdmUgZWdnIGFuaW1hdGlvbiB0aW1lIHdhcm5pbmdcbiAgICByZW1vdmVFZ2dNZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAkKCcjZWdnTWVzc2FnZScpLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIC8vUG9rw6ltb24gU2VsZWN0b3JcbiAgICAkKCcjcG9rZW1vblNlbGVjdCcpLm9uKCdhdXRvY29tcGxldGVzZWxlY3QnLCBmdW5jdGlvbihlLCB1aSkge1xuICAgICAgICAvL1JlbW92ZSBmb3JtZXIgc2VsZWN0aW9uXG4gICAgICAgICQoJyNwb2tlbW9uLWRlc2MsICNhZGRQb2tlbW9uU3BlY2llcycpLnJlbW92ZSgpO1xuICAgICAgICAkKFwiI3Bva2Vtb25GaWVsZHNcIikuaHRtbCgnJyk7XG4gICAgICAgIC8vQWRkIFBva8OpbW9uIGF2YXRhclxuICAgICAgICAkcG9rZW1vbkF2YXRhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJChcIiNwb2tlbW9uRmllbGRzXCIpLmFwcGVuZCgnPGxpIGNsYXNzPVwicG9rZW1vbi1hdmF0YXIgJyArIHVpLml0ZW0ucmVzb3VyY2VOYW1lICsgJ1wiPicgKyAnPC9saT4nKTtcbiAgICAgICAgICAgICQoJyNwb2tlLWltZycpLmFkZENsYXNzKHVpLml0ZW0ucmVzb3VyY2VOYW1lKTtcbiAgICAgICAgICAgICQoJyNwb2tlLWltZycpLmFkZENsYXNzKCdwb2tlbW9uLWF2YXRhcicpO1xuICAgICAgICAgICAgJCgnI3Bva2Vtb25GaWVsZHMgbGknKS5hdHRyKCdpZCcsIGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3Bva2Vtb24nICsgKGkgKyAxKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICAvLyBHZW5lcmF0ZSBpbnB1dGZpZWxkIHRvIHNlbGVjdCBudW1iZXIgb2YgUG9rw6ltb24gdG8gYWRkXG4gICAgICAgICRwb2tlbW9uTnVtYmVySW5wdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJy51aS13aWRnZXQnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJudW1iZXItaW5wdXRfX3dyYXBwZXJcIj48bGFiZWwgZm9yPVwicG9rZW1vbk51bWJlclwiPk51bWJlciBvZiA8c3BhbiBjbGFzcz1cInNwZWNpZXMtaW5zdGFuY2VcIj4nICsgdWkuaXRlbS52YWx1ZSArICc6PC9zcGFuPjwvbGFiZWw+IDxpbnB1dCBpZD1cInBva2Vtb25OdW1iZXJcIiB0eXBlPVwibnVtYmVyXCIgbmFtZT1cInBva2Vtb25OdW1iZXJcIiBjbGFzcz1cInBva2Vtb24tbnVtYmVyXCIgbWluPVwiMFwiIHZhbHVlPVwiMVwiPjwvZGl2PicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEdlbmVyYXRlIGlucHV0ZmllbGQgdG8gc2VsZWN0IFBva8OpbW9uIGNhbmR5IGluIGludmVudG9yeVxuICAgICAgICAkcG9rZW1vbkNhbmR5SW5wdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJy51aS13aWRnZXQnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJjYW5keS1pbnB1dF9fd3JhcHBlclwiPjxsYWJlbCBmb3I9XCJjYW5keU51bWJlclwiPk51bWJlciBvZiA8c3BhbiBjbGFzcz1cInNwZWNpZXMtaW5zdGFuY2VcIj4nICsgdWkuaXRlbS5jYW5keVR5cGUgKyAnIGNhbmR5IGluIGludmVudG9yeTo8L3NwYW4+PC9sYWJlbD4gPGlucHV0IGlkPVwiY2FuZHlOdW1iZXJcIiB0eXBlPVwibnVtYmVyXCIgbmFtZT1cImNhbmR5TnVtYmVyXCIgY2xhc3M9XCJjYW5keS1udW1iZXJcIiBtaW49XCIwXCIgdmFsdWU9XCIxXCI+PC9kaXY+JylcbiAgICAgICAgfVxuICAgICAgICAvLyBHZW5lcmF0ZSBjaGVja2JveCB0byBpbmRpY2F0ZSBhIGZpcnN0IGV2b2x1dGlvbiBvZiB0aGUgc3BlY2llc1xuICAgICAgICAkcG9rZW1vbkZpcnN0RXZvbHV0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcudWktd2lkZ2V0JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZXZvbHV0aW9uLWJvbnVzXCI+PHNwYW4gY2xhc3M9XCJib251c1wiPkFkZHM8YnI+NTAwIFhQITwvc3Bhbj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cImZpcnN0RXZvbHZlXCIgaWQ9XCJmaXJzdEV2b2x2ZVwiPjxsYWJlbCBmb3I9XCJmaXJzdEV2b2x2ZVwiPjwvbGFiZWw+PHNwYW4+SXMgdGhpcyB0aGUgZmlyc3QgdGltZSB5b3UgZXZvbHZlIGEgPHNwYW4gY2xhc3M9XCJzcGVjaWVzLWluc3RhbmNlXCI+JyArIHVpLml0ZW0udmFsdWUgKyAnPC9zcGFuPj88L3NwYW4+PC9kaXY+JylcbiAgICAgICAgfVxuXG4gICAgICAgIC8vRXZvbHV0aW9uIGlzIG5vdCBwb3NzaWJsZSBvbiBlbmQgc3RhdGVzXG4gICAgICAgIGlmICh1aS5pdGVtLmV2b2x2ZSAhPSB0cnVlKSB7XG4gICAgICAgICAgICByZXNldEZvcm0oKTtcbiAgICAgICAgICAgICRwb2tlbW9uQXZhdGFyKCk7IC8vR2VuZXJhdGUgZmlyc3QgUG9rw6ltb24gYXZhdGFyXG5cbiAgICAgICAgICAgICQoJyNwb2tlbW9uQ2hvaWNlJykucHJlcGVuZCgnPGgyPllvdSBjaG9zZSA8c3BhbiBjbGFzcz1cInNwZWNpZXMtaW5zdGFuY2VcIj4nICsgdWkuaXRlbS52YWx1ZSArICchIDwvc3Bhbj48L2gyPjxwIGlkPVwicG9rZW1vbi1kZXNjXCI+VW5mb3J0dW5hdGVseSA8c3BhbiBjbGFzcz1cInNwZWNpZXMtaW5zdGFuY2VcIj4nICsgdWkuaXRlbS52YWx1ZSArICc8L3NwYW4+IGRvZXMgbm90IGV2b2x2ZS4gOig8L3A+Jyk7IC8vSW5mb3JtIHVzZXJcbiAgICAgICAgICAgICQoJyNwb2tlbW9uU2VsZWN0JykudmFsKCcnKTtcblxuICAgICAgICAgICAgJCgnLmJ1dHRvbnMnKS5hcHBlbmQoJzxhIGlkPVwicmVzZXRQb2tlbW9uU2VsZWN0XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIG9uY2xpY2s9XCJyZXNldEZvcm0oKTtcIj5SZXNldCBTZWxlY3Rpb248L2E+JylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICB9XG4gICAgICAgIC8vQWRkIG11bHRpcGxlIFBva8OpbW9uIG9mIG9uZSBzcGVjaWVzXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzZXRGb3JtKCk7XG4gICAgICAgICAgICAvL1Nob3cgZmlyc3QgUG9rw6ltb24gYXZhdGFyXG4gICAgICAgICAgICAkcG9rZW1vbkF2YXRhcigpO1xuXG4gICAgICAgICAgICAvL0FkZCBQb2vDqW1vbiBjaG9pY2UgKyBpbnB1dGZpZWxkc1xuICAgICAgICAgICAgJCgnI3Bva2Vtb25DaG9pY2UnKS5wcmVwZW5kKCc8cCBpZD1cInBva2Vtb24tZGVzY1wiPjxoMj5Zb3UgY2hvc2UgPHNwYW4gY2xhc3M9XCJzcGVjaWVzLWluc3RhbmNlXCI+JyArIHVpLml0ZW0udmFsdWUgKyAnISZuYnNwOzwvc3Bhbj48L2gyPicpO1xuICAgICAgICAgICAgJCgnLnVpLXdpZGdldCcpLmFwcGVuZCgkcG9rZW1vbk51bWJlcklucHV0KCkpLmFwcGVuZCgkcG9rZW1vbkNhbmR5SW5wdXQoKSkuYXBwZW5kKCRwb2tlbW9uRmlyc3RFdm9sdXRpb24oKSk7XG4gICAgICAgICAgICAvL0dlbmVyYXRlIGJ1dHRvbnMgdG8gcmVzZXQgc2VsZWN0aW9uZmllbGQgb3IgdG8gYWRkIFBva8OpbW9uIHRvIGV2b2x1dGlvbiB0YWJsZVxuICAgICAgICAgICAgJCgnLmJ1dHRvbnMnKS5hcHBlbmQoJzxhIGlkPVwicmVzZXRQb2tlbW9uU2VsZWN0XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIG9uY2xpY2s9XCJyZXNldEZvcm0oKTtcIj5SZXNldCBTZWxlY3Rpb248L2E+PGEgaWQ9XCJhZGRQb2tlbW9uU3BlY2llc1wiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBvbmNsaWNrPVwiYWRkUG9rZW1vblNwZWNpZXMoKTtcIj5BZGQgUG9rw6ltb24gdG8gVGFibGU8L2E+Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvL0dlbmVyYXRlIFBva8OpbW9uIGF2YXRhcnMgYmFzZWQgbnVtYmVyIHNlbGVjdGlvbiBpbiBpbnB1dGZpZWxkXG4gICAgICAgICQoJyNwb2tlbW9uTnVtYmVyJykub24oJ2tleXVwIGNoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyICRudW1iZXJQb2tlbW9uID0gcGFyc2VJbnQoJChcImlucHV0W25hbWU9J3Bva2Vtb25OdW1iZXInXVwiKS52YWwoKSwgMTApO1xuICAgICAgICAgICAgLy9SZXNldCBhdmF0YXJzIGZyb20gcHJldmlvdXMgc2VsZWN0aW9uXG4gICAgICAgICAgICAkKFwiI3Bva2Vtb25GaWVsZHNcIikuaHRtbChcIlwiKTtcbiAgICAgICAgICAgIC8vTnVtYmVyIGlucHV0IGxvb3BcbiAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPD0gJG51bWJlclBva2Vtb247IGkrKykge1xuICAgICAgICAgICAgICAgICRwb2tlbW9uQXZhdGFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vUmVtb3ZlIFBva8OpbW9uIGF2YXRhciBpZiB2YWx1ZSByZWFjaGVzIDBcbiAgICAgICAgaWYgKCQoXCJpbnB1dFtuYW1lPSdwb2tlbW9uTnVtYmVyJ11cIikudmFsKCkgPT09IDApIHtcbiAgICAgICAgICAgIHJlc2V0Rm9ybSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9BZGQgYm9udXMgYnViYmxlXG4gICAgICAgICQoJyNmaXJzdEV2b2x2ZScpLmNoYW5nZShmdW5jdGlvbigpe1xuICAgICAgICAgIGlmKCQodGhpcykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgICAgICAgJCgnLmJvbnVzJykuYWRkQ2xhc3MoJ2JvbnVzLWFuaW1hdGVkJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5ib251cycpLnJlbW92ZUNsYXNzKCdib251cy1hbmltYXRlZCcpLmNzcygnb3BhY2l0eScsIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuXG4gICAgICAgIC8vIEFkZCBQb2vDqW1vbiB0byBFdm9sdXRpb24gdGFibGVcbiAgICAgICAgYWRkUG9rZW1vblNwZWNpZXMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgdmFyICR0YWJsZUlubmVyID0gJCgnI2ZpbmFsRGVzdGluYXRpb24nKS5maW5kKCd0Ym9keScpO1xuICAgICAgICAgICAgdmFyICRudW1Qb2tlbW9uID0gcGFyc2VJbnQoJCgnI3Bva2Vtb25OdW1iZXInKS52YWwoKSwgMTApO1xuICAgICAgICAgICAgdmFyICRudW1DYW5keSA9IHBhcnNlSW50KCQoJyNjYW5keU51bWJlcicpLnZhbCgpLCAxMCk7XG4gICAgICAgICAgICB2YXIgJGNhbmR5TmVlZGVkID0gJG51bVBva2Vtb24gKiB1aS5pdGVtLmNhbmR5O1xuICAgICAgICAgICAgdmFyICRjYW5keU5lZWRlZHZzSW52ZW50b3J5ID0gTWF0aC5mbG9vcigkbnVtQ2FuZHkgLyB1aS5pdGVtLmNhbmR5KTtcbiAgICAgICAgICAgIHZhciAkZXZvbHV0aW9uc1Bvc3NpYmxlID0gTWF0aC5taW4oJGNhbmR5TmVlZGVkdnNJbnZlbnRvcnksICRudW1Qb2tlbW9uKTtcblxuXG4gICAgICAgICAgICBpZiAoJG51bVBva2Vtb24gPT09IHVpLml0ZW0uY2FuZHkgKyAxKSB7XG4gICAgICAgICAgICAgICQoJyNtZXRhRXZvbHV0aW9uJykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgICAgICAgICAgICQoJyNtZXRhTnVtQ2FuZHknKS5hcHBlbmQodWkuaXRlbS5jYW5keSArICcgPHNwYW4gY2xhc3M9XCJzcGVjaWVzLWluc3RhbmNlXCI+JyArIHVpLml0ZW0uc3BlY2llcyArICc8L3NwYW4+IGNhbmR5Jyk7XG4gICAgICAgICAgICAgICQoJyNtZXRhRXZvbHZlU3RhdGUnKS5hcHBlbmQoJycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgJCgnI21ldGFFdm9sdXRpb24nKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0NoZWNrIHdldGhlciB0aGVyZSdzIGEgbmV3IGV2b2x1dGlvbiB0YWtpbmcgcGxhY2VcbiAgICAgICAgICAgIGlmICgkKCcjZmlyc3RFdm9sdmUnKS5pcygnOmNoZWNrZWQnKSAmJiAkZXZvbHV0aW9uc1Bvc3NpYmxlID49IDEpIHtcbiAgICAgICAgICAgICAgICAkeHBHYWluZWQgPSAkZXZvbHV0aW9uc1Bvc3NpYmxlICogNTAwICsgNTAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkeHBHYWluZWQgPSAkZXZvbHV0aW9uc1Bvc3NpYmxlICogNTAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcm93VGVtcGxhdGUgPSAnPHRyPjx0ZD4nICsgJG51bVBva2Vtb24gKyAnPC90ZD48dGQgY2xhc3M9XCJwb2tlbW9uLWF2YXRhciAnICsgdWkuaXRlbS5yZXNvdXJjZU5hbWUgKyAnXCI+PC90ZD4nICsgJzwvdGQ+PHRkIGNsYXNzPVwid2lkZVwiPicgKyAkY2FuZHlOZWVkZWQgKyAnPC90ZD48dGQgY2xhc3M9XCJ3aWRlXCI+JyArICRudW1DYW5keSArICc8L3RkPjx0ZCBjbGFzcz1cImV2b2x2ZXNQb3NzaWJsZVwiPicgKyAkZXZvbHV0aW9uc1Bvc3NpYmxlICsgJzwvdGQ+PHRkIGNsYXNzPVwieHBHYWluZWRcIj4nICsgJHhwR2FpbmVkICsgJzwvdGQ+PHRkPjxhIGlkPVwicmVtb3ZlUm93XCIgY2xhc3M9XCJjaXJjdWxhci1idXR0b25cIj4mIzIxNTs8L2E+PC90ZD5cIjwvdHI+JztcblxuICAgICAgICAgICAgJHRhYmxlSW5uZXIuYXBwZW5kKHJvd1RlbXBsYXRlKTtcblxuICAgICAgICAgICAgLy8gYWRkIHVuaXF1ZSBpZCB0byBlYWNoIHJvdyAtLSBkbyBJIG5lZWQgdGhpcz9cbiAgICAgICAgICAgICQoJyNmaW5hbERlc3RpbmF0aW9uIHRib2R5IHRyJykuYXR0cignaWQnLCBmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdwb2tlbW9uUm93JyArIChpICsgMSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gcmVtb3ZlIHJvdyBvbiBjbGlja1xuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNyZW1vdmVSb3cnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJ3RyJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9DYWxjdWxhdGUgIyBldm9sdXRpb25zIHBvc3NpYmxlIGFuZCBYUCBnYWluZWRcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVN1bSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VtMSA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIHN1bTIgPSAwO1xuXG4gICAgICAgICAgICAgICAgJCgnLmV2b2x2ZXNQb3NzaWJsZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1bTEgKz0gcGFyc2VJbnQoJCh0aGlzKS5odG1sKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vV2FybiB1c2VyIHRoYXQgcm91Z2hseSA2MCBldm9sdXRpb25zIGFyZSBwb3NzaWJsZSB3aXRoaW4gb25lIGx1Y2sgZWdnIGFjdGl2YXRpb25cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1bTEgPj0gNjAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgJCgnI2VnZ01lc3NhZ2UnKS5odG1sKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAkKCcjZWdnTWVzc2FnZScpLmFwcGVuZCgnPHAgY2xhc3M9XCJlZ2ctbWVzc2FnZVwiPllvdSBjYW4gb25seSBldm9sdmUgKHJvdWdobHkpIDYwIFBva8OpbW9uIGR1cmluZyBvbmUgTHVja3kgRWdnIGFjdGl2YXRpb24uIDxicj5Zb3UgbWF5IHdhbnQgdG8gZ2V0IGFub3RoZXIgZWdnITwvcD4gPGEgaWQ9XCJyZW1vdmVFZ2dNZXNzYWdlXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIG9uY2xpY2s9XCJyZW1vdmVFZ2dNZXNzYWdlKCk7XCI+R290IGl0ITwvYT4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdW0xIDwgNjApIHtcbiAgICAgICAgICAgICAgICAgICAgICAkKCcjZWdnTWVzc2FnZScpLmh0bWwoJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJCgnLnhwR2FpbmVkJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VtMiArPSBwYXJzZUludCgkKHRoaXMpLmh0bWwoKSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvL0FkZCBjYWxjdWxhdGlvbnMgdG8gRXZvbHV0aW9uIFRhYmxlXG4gICAgICAgICAgICAgICAgJCgnI3RvdGFsLTEnKS5odG1sKHN1bTEpO1xuICAgICAgICAgICAgICAgICQoJyN0b3RhbC0yJykuaHRtbChzdW0yKTtcbiAgICAgICAgICAgICAgICAkKCcjdG90YWwtMycpLmh0bWwoc3VtMiAqIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsY3VsYXRlU3VtKCk7XG5cbiAgICAgICAgICAgIC8vUmVkbyBjYWxjdWxhdGlvbiBpZiB1c2VyIHJlbW92ZXMgYSByb3cgZnJvbSB0aGUgRXZvbHV0aW9uIHRhYmxlXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAkKCcjcmVtb3ZlUm93JyksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZVN1bSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJlc2V0Rm9ybSgpO1xuICAgICAgICAgIH1cblxuXG4gICAgfSk7XG5cbn0pO1xuIl19"}